# 第七章：函数

## 7.1 可接受任意数量参数的函数

### 问题
> 你想构造一个可接受任意数量参数的函数。

### 解决方法
> 使用*args和**kwargs

### 延伸
> **kwargs只能出现在最后一个参数

## 7.2 强制接受关键字参数的函数
### 问题
> 你希望函数的某些参数强制使用关键字参数传递

### 解决方法
> 将强制关键字参数放到 *参数 或者单个 * 后面，比如：

	def recv(maxsize, *, block):
        'Receives a message'
        pass

    recv(1024, True) # TypeError
    recv(1024, block=True) # Ok
    
## 7.3 给函数参数增加元信息
### 问题
> 给函数参数添加格外信息，参数类型，返回值类型

### 解决方法
    def add(x:int, y:int) -> int:
        return x + y
解释器不会对参数进行类型检查，只是方便阅读，使用help时会出现在文档中

	>>> help(add)
    Help on function add in module __main__:
    add(x: int, y: int) -> int

### 讨论
    >>> add.__annotations__
    {'y': <class 'int'>, 'return': <class 'int'>, 'x': <class 'int'>}

## 7.4 返回多个值的函数
### 问题
> 函数返回多个值

### 解决方法
	def func():
    	return 1,2,3

## 7.5 定义有默认参数的函数
### 问题
> 函数的参数有默认值

### 解决方案
> 直接在函数定义中给参数一个默认值

若不想提供默认值，只想测试是否有参数传递进来，可以像下面这样写
    _no_value = object()

    def spam(a, b=_no_value):
        if b is _no_value:
            print('No b value supplied')
        ...
###  讨论
默认参数的值仅仅在函数定义的时候赋值一次，因此，默认参数的值应该是不可变对象如None，True,False,数字或字符串

## 7.6 定义匿名或内联函数
### 问题
> 你想为 sort() 操作创建一个很短的回调函数，但又不想用 def 去写一个单行函数，而是希望通过某个快捷方式以内联方式来创建这个函数。

### 解决方法
> 使用lambda

使用场景
    >>> names = ['David Beazley', 'Brian Jones',
    ...         'Raymond Hettinger', 'Ned Batchelder']
    >>> sorted(names, key=lambda name: name.split()[-1].lower())
    ['Ned Batchelder', 'David Beazley', 'Raymond Hettinger', 'Brian Jones']


## 7.7 匿名函数捕获变量值
### 问题
> 用lambda定义了一个匿名函数，并想在定义时捕获到某些变量的值

### 解决方法
###### 引申
-----
    >>> x = 10
    >>> a = lambda y: x + y
    >>> x = 20
    >>> b = lambda y: x + y
	>>> a(10)
    30
    >>> b(10)
    30

两者运行结果都为30

__原因__:x在运行时绑定，而不是定义时绑定

---
想让某个匿名函数在定义时就捕获到值，可以将那个参数值定义成默认参数即可

### 讨论

    >>> funcs = [lambda x: x+n for n in range(5)]
    >>> for f in funcs:
    ... print(f(0))
    ...
    4
    4
    4
    4
    4
func中为五个lambda函数，在函数未调用的时候n并未计算，当执行f(0)的时候才会找n的值，此时n已经遍历结束，值为4

    >>> funcs = [lambda x, n=n: x+n for n in range(5)]
    >>> for f in funcs:
    ... print(f(0))
    ...
    0
    1
    2
    3
    4
将n传给形参，定义时绑定
